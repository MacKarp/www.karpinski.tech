---
title: "RustyKube"
date: 2023-06-28T18:09:28+02:00
tags:
  - Docker
  - Kubernetes
  - Google Cloud
  - Rust
  - WWW
draft: false
---

RustyKube to prosta aplikacja napisana w jzyku Rust, jej celem byo przede wszystkim zaznajomienie si z technologi Kubernetes. Aplikacja skada si z trzech czci: bazy danych, backendu i frontendu.

## Kubernetes
Zainteresowaem si skalowaniem aplikacji i postanowiem pobawi si technologi Kubernetes, mogem oczywicie uruchomi jak przykadow aplikacj ale stwierdziem 偶e wol napisa swoj prost aplikacj, w kt贸rej bd m贸g dorzuci sobie jakie dodatkowe dane, gdybym mia potrzeb a i w przyszoci, gdyby zainteresowaa by mnie jaka technologia to m贸gbym sobie j zmodyfikowa 
Aplikacja jest uruchomiona na platformie [Google Cloud](https://cloud.google.com/) przy pomocy [Google Kubernetes Engine](https://cloud.google.com/kubernetes-engine). Aplikacja posiada skonfigurowany CI/CD wic ka偶da aktualizacja w repozytorium powoduje automatyczne wdro偶enie w GCP.

W pocztkowych fazach nauki i testowania jak co dziaa miaem uruchomione kilka nod贸w z backendem aplikacji zawierajcym od 3 do 5 pod贸w w ka偶dym. Na chwil obecn - ze wzgldu na ch ograniczenia koszt贸w - ustawiony jest autopilot, przewa偶nie zawierajcy 1 noda i 1 poda.

## Baza danych
Jako baz danych wybraem MongoDB, projekt mia si skupi na zapoznaniu si z technologi Kubernetes wic nie byo potrzeby u偶ywa relacyjnej bazy danych, wystarczyo 偶eby baza przechowywaa potrzebne dane, do kt贸rych backend m贸gy si odwoywa lub zapisywa.

## Backend
Aplikacja napisana w jzyku Rust przy wykorzystaniu z frameworka [Rocket](https://rocket.rs/). Jest to proste API, kt贸re pobiera lub zapisuje dane w bazie danych. Dodatkowo do ka偶dego wystawionego JSONa dodawana jest nazwa hosta(poda), z kt贸rego pochodzi odpowied藕. Backend dostpny jest pod adresem: [rk.karpinski.tech](http://rk.karpinski.tech) 

Aplikacja udostpnia poszczeg贸lne endpointy:
  - get:
    - /books - pobiera wszystkie dane z bazy danych
    - /books/\<id\> - pojedynczy wpis o podanym id
  - post:
    - /books - zapisuje do bazy danych nowy wpis

Przykadowe zapytania:

get /books:

```{
  "hostname": "backend-77cf5d6465-jjl9l",
  "books": [
    {
      "_id": {
        "$oid": "643701f7c0c25e2543f0c69e"
      },
      "title": "The Grapes of Wrath1",
      "author": "John Steinbeck1"
    },
    {
      "_id": {
        "$oid": "6419bf2f105a3c2ed1fa40b8"
      },
      "title": "To Kill a Mockingbird",
      "author": "Harper Lee"
    },
    {
      "_id": {
        "$oid": "6436f918c936c189a23df8ba"
      },
      "title": "The Grapes of Wrath1",
      "author": "John Steinbeck1"
    },
   ...
    {
      "_id": {
        "$oid": "64370870f5c6cb1c41698f83"
      },
      "title": "The Grapes of Wrath1",
      "author": "John Steinbeck1"
    }
  ]
}
```

get /books/64370b83c7043b3af6f64896

```
{
  "hostname": "backend-77cf5d6465-jjl9l",
  "books": [
    {
      "_id": {
        "$oid": "64370b83c7043b3af6f64896"
      },
      "title": "The Grapes of Wrath1",
      "author": "John Steinbeck1"
    }
  ]
}
```

post /books:

```
```

## Frontend 
WIP - [RustyKube](http://rustykube.karpinski.tech)

## Repozytorium
Repozytorium kodu aplikacji, oraz pliki dockerfile pozwalajce zbudowa kontener i konfiguracje kubernetesa znajduj si w moim [repozytorium RustyKube](https://github.com/MacKarp/RustyKube)